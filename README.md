# Algo Trading Project

MetaTrader 5を使用したアルゴリズムトレーディングプロジェクトです。
ボリンジャーバンド戦略を使用した自動トレーディングシステムです。

## ⚠️ セキュリティに関する重要事項

**このプロジェクトには機密情報（ログイン情報）を含めないでください。**

- `.env`ファイルは`.gitignore`に含まれているため、GitHubにアップロードされません
- ログイン情報は`.env`ファイルに設定してください
- `main.py`にログイン情報を直接記述しないでください

## プロジェクト構造

```
algo-trading/
├── README.md
├── main.py                 # メイン実行ファイル
├── src/
│   ├── engine/            # トレード実行エンジン
│   │   ├── mt5_connector.py  # MT5接続クラス
│   │   └── executor.py       # トレード実行クラス
│   └── strategies/         # トレーディング戦略
│       └── bollinger.py    # ボリンジャーバンド戦略
└── test_bollinger.py       # 戦略テストスクリプト
```

## セットアップ

### 1. 依存パッケージのインストール

```bash
pip install pandas numpy python-dotenv
```

### 2. MetaTrader 5のPython APIをインストール

**重要**: MetaTrader 5のPython APIをインストールする必要があります。

#### 方法A: pipでインストール（推奨）

```bash
pip install MetaTrader5
```

#### 方法B: MT5のインストールディレクトリから利用

MT5がインストールされている場合、MT5のインストールディレクトリからPython APIを利用できる場合があります。

1. MetaTrader 5を起動
2. アカウントにログイン
3. このプログラムを実行

### 3. デモトレード口座への接続設定

**重要**: デモトレード口座に接続するには、ログイン情報を設定する必要があります。

#### 方法1: .envファイルを使用（推奨）

プロジェクトルートに `.env` ファイルを作成し、以下を設定してください:

```env
MT5_LOGIN=あなたのアカウント番号
MT5_PASSWORD=あなたのパスワード
MT5_SERVER=あなたのブローカーのデモサーバー名
```

**デモサーバー名の確認方法**:
- MT5のターミナルを開く
- ツール → オプション → サーバー で確認
- または、MT5のログイン画面でサーバー一覧を確認
- 通常は「ブローカー名-Demo」または「ブローカー名 Demo」の形式

#### .envファイルの作成

プロジェクトルートに`.env`ファイルを作成し、以下の形式で設定してください:

```env
MT5_LOGIN=あなたのアカウント番号
MT5_PASSWORD=あなたのパスワード
MT5_SERVER=あなたのブローカーのサーバー名
```

**注意**: `.env`ファイルは`.gitignore`に含まれているため、GitHubにアップロードされません。
機密情報を保護するため、必ず`.env`ファイルを使用してください。

### 4. プログラムの実行

以下のコマンドでプログラムを実行:

```bash
python main.py
```

**注意**: 
- MT5を起動する必要はありません（プログラムが自動的に接続します）
- ただし、ログイン情報が設定されていない場合は、MT5を起動してログインしている必要があります

プログラムは自動的にMT5に接続し、ボリンジャーバンド戦略を実行します。

## 使用方法

### 戦略のテスト

戦略の動作をテストするには:

```bash
python test_bollinger.py
```

### 実際のトレード実行

1. MetaTrader 5を起動してアカウントにログイン
2. `main.py`を実行:

```bash
python main.py
```

プログラムは以下の動作を行います:
- MT5に自動接続
- EURUSDの1時間足データを取得
- ボリンジャーバンド戦略に基づいてエントリー/エグジット判定
- 条件を満たした場合、自動的に注文を送信

### 設定の変更

`main.py`内で以下の設定を変更できます:

- `symbol`: 取引する通貨ペア（デフォルト: "EURUSD"）
- `lot_size`: ロットサイズ（デフォルト: 0.01）
- `timeframe`: 時間足（デフォルト: M5（5分足））
- `check_interval`: チェック間隔（秒、デフォルト: 30）

## セキュリティ

- ログイン情報は`.env`ファイルに設定してください
- `.env`ファイルは`.gitignore`に含まれているため、GitHubにアップロードされません
- 機密情報をコードに直接記述しないでください

## トラブルシューティング

### MetaTrader5モジュールが見つからない

1. MT5がインストールされているか確認
2. `pip install MetaTrader5` でインストールを試す
3. MT5が起動しているか確認

### MT5に接続できない

接続できない場合、以下の点を確認してください:

1. **ログイン情報が設定されているか**
   - `.env`ファイルに`MT5_LOGIN`, `MT5_PASSWORD`, `MT5_SERVER`が設定されているか確認
   - または、`main.py`で直接設定されているか確認

2. **デモサーバー名が正しいか**
   - MT5のターミナルで確認できるサーバー名と完全に一致しているか確認
   - 大文字小文字、ハイフン、スペースなども正確に入力してください

3. **アカウント情報が正しいか**
   - アカウント番号、パスワードが正しいか確認
   - MT5のターミナルで手動ログインできるか確認

4. **MT5の初期化エラーの場合**
   - MetaTrader 5がインストールされているか確認
   - `pip install MetaTrader5` でPython APIがインストールされているか確認
   - MT5のインストールパスが正しいか確認

5. **エラーメッセージを確認**
   - プログラム実行時に表示される詳細なエラーメッセージを確認
   - エラーコードと説明に基づいて対処してください

詳細は `MT5_SETUP.md` を参照してください。

2025年11月17日に書いています。

